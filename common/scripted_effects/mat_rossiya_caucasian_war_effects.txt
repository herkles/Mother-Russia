## General Situation Effects
mat_rossyia_caucasian_war_initialize_variables_effect = {
	scope:journal_entry = {
		set_variable = {
			name = mat_rossyia_caucasian_war_phase_var
			value = flag:mat_rossyia_caucasian_war_stable # We start in the stable phase
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_escalation_var
			value = 0
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_deescalation_var
			value = 0
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_riot_counter_var
			value = 0
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_crisis_var
			value = 250
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_crisis_progress_var
			value = 0
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_crisis_duration_var
			value = 0
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_crisis_counter_var
			value = 0
		}
	}
}

mat_rossyia_caucasian_war_validate_involvement = {
	every_country = {
		limit = {
			OR = {
				is_involved_in_journal_entry = je_mat_rossyia_caucasian_war_situation
				mat_rossyia_caucasian_war_should_be_involved_trigger = yes
			}
		}
		if = {
			limit = {
				is_involved_in_journal_entry = je_mat_rossyia_caucasian_war_situation
				mat_rossyia_caucasian_war_should_be_involved_trigger = no
			}
			global_var:mat_rossyia_caucasian_war_situation = {
				remove_involved_country = prev
			}
		}
		if = {
			limit = {
				NOT = {
					is_involved_in_journal_entry = je_mat_rossyia_caucasian_war_situation
				}
				mat_rossyia_caucasian_war_should_be_involved_trigger = yes
			}
			global_var:mat_rossyia_caucasian_war_situation = {
				add_involved_country = prev
			}
		}
	}
}

mat_rossyia_caucasian_war_calculate_situation_variables_effect = {
	global_var:mat_rossyia_caucasian_war_situation = {
		set_variable = {
			name = mat_rossyia_caucasian_war_escalation_progress_var
			value = mat_rossyia_caucasian_war_escalation_progress_value
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_deescalation_progress_var
			value = mat_rossyia_caucasian_war_deescalation_progress_value
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_riot_counter_var
			value = mat_rossyia_caucasian_war_riot_counter_value
		}
	}
	if = {
		limit = {
			mat_rossyia_caucasian_war_crisis_phase_trigger = yes
		}
		global_var:mat_rossyia_caucasian_war_situation = {
			set_variable = {
				name = mat_rossyia_caucasian_war_crisis_progress_var
				value = mat_rossyia_caucasian_war_crisis_progress_value
			}
			change_variable = {
				name = mat_rossyia_caucasian_war_crisis_duration_var
				add = 1
			}
		}
	}
	if = {
		limit = {
			OR = {
				mat_rossyia_caucasian_war_hostility_phase_trigger = yes
				mat_rossyia_caucasian_war_crisis_phase_trigger = yes
			}
		}
		mat_rossyia_caucasian_war_update_riot_variables = yes
	}
	mat_rossyia_caucasian_war_clamp_situation_variables_effect = yes
	mat_rossyia_caucasian_war_update_situation_progressbar_effect = yes
}

mat_rossyia_caucasian_war_clamp_situation_variables_effect = {
	global_var:mat_rossyia_caucasian_war_situation = {
		clamp_variable = {
			name = mat_rossyia_caucasian_war_escalation_var
			max = 500
			min = 0
		}
		clamp_variable = {
			name = mat_rossyia_caucasian_war_deescalation_var
			max = 500
			min = 0
		}
		clamp_variable = {
			name = mat_rossyia_caucasian_war_crisis_var
			max = 250
			min = 0
		}
	}
}

mat_rossyia_caucasian_war_advance_situation_variables_effect = {
	global_var:mat_rossyia_caucasian_war_situation = {
		change_variable = {
			name = mat_rossyia_caucasian_war_escalation_var
			add = var:mat_rossyia_caucasian_war_escalation_progress_var
		}
		change_variable = {
			name = mat_rossyia_caucasian_war_deescalation_var
			add = var:mat_rossyia_caucasian_war_deescalation_progress_var
		}
		if = {
			limit = {
				mat_rossyia_caucasian_war_crisis_phase_trigger = yes
			}
			change_variable = {
				name = mat_rossyia_caucasian_war_crisis_var
				add = var:mat_rossyia_caucasian_war_crisis_progress_var
			}
			clamp_variable = {
				name = mat_rossyia_caucasian_war_crisis_var
				max = 250
				min = 0
			}
			set_variable = {
				name = mat_rossyia_caucasian_war_deescalation_var
				value = 0
			}
		}
	}
	
	mat_rossyia_caucasian_war_clamp_situation_variables_effect = yes
	mat_rossyia_caucasian_war_update_situation_progressbar_effect = yes
}

mat_rossyia_caucasian_war_update_situation_progressbar_effect = {
	global_var:mat_rossyia_caucasian_war_situation = {
		set_bar_progress = {
			name = mat_rossyia_caucasian_war_escalation_progress_bar
			value = var:mat_rossyia_caucasian_war_escalation_var
		}
		set_bar_progress = {
			name = mat_rossyia_caucasian_war_deescalation_progress_bar
			value = var:mat_rossyia_caucasian_war_deescalation_var
		}
		if = {
			limit = {
				mat_rossyia_caucasian_war_crisis_phase_trigger = yes
			}
			set_bar_progress = {
				name = mat_rossyia_caucasian_war_crisis_progress_bar
				value = var:mat_rossyia_caucasian_war_crisis_var
			}
		}
		else = {
			set_bar_progress = {
				name = mat_rossyia_caucasian_war_crisis_progress_bar
				value = 250
			}
		}
	}
}

mat_rossyia_caucasian_war_check_situation_phase_effect = {
	global_var:mat_rossyia_caucasian_war_situation = {
		# Run Crisis Failure logic check first
		if = {
			limit = {
				mat_rossyia_caucasian_war_crisis_phase_trigger = yes
				var:mat_rossyia_caucasian_war_crisis_var <= 0
			}
			every_country = {
				limit = {
					is_involved_in_journal_entry = je_mat_rossyia_caucasian_war_situation
				}
				trigger_event = {
					id = mat_rossyia_caucasian_war.028 # Rumelia in Disarray
				}
			}
			mat_rossyia_caucasian_war_cleanup_crisis_effect = yes
			mat_rossyia_caucasian_war_force_deconfliction_effect = yes
		}
		else_if = {
			limit = {
				OR = {
					var:mat_rossyia_caucasian_war_escalation_var >= 500
					var:mat_rossyia_caucasian_war_deescalation_var >= 500
				}
			}
			## Attempt to Deescalate First
			if = {
				limit = {
					mat_rossyia_caucasian_war_can_deescalate_tension_trigger = yes
					var:mat_rossyia_caucasian_war_deescalation_var >= 500
				}
				if = { # From Unrest to Deconfliction
					limit = {
						var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_unrest
					}
					set_variable = {
						name = mat_rossyia_caucasian_war_phase_var
						value = flag:mat_rossyia_caucasian_war_deconfliction
					}
					every_country = {
						limit = {
							is_involved_in_journal_entry = je_mat_rossyia_caucasian_war_situation
						}
						post_notification = notification_mat_rossyia_caucasian_war_transition_deconfliction
					}
					custom_tooltip = mat_rossyia_caucasian_war_transition_deconfliction_tt
				}
				else_if = { # From Hostility to Deconfliction
					limit = {
						var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_hostility
					}
					set_variable = {
						name = mat_rossyia_caucasian_war_phase_var
						value = flag:mat_rossyia_caucasian_war_deconfliction
					}
					every_country = {
						limit = {
							is_involved_in_journal_entry = je_mat_rossyia_caucasian_war_situation
						}
						post_notification = notification_mat_rossyia_caucasian_war_transition_deconfliction
					}
					custom_tooltip = mat_rossyia_caucasian_war_transition_deconfliction_tt
				}
				else_if = { # From Crisis to Deconfliction
					limit = {
						var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_crisis
					}
					set_variable = {
						name = mat_rossyia_caucasian_war_phase_var
						value = flag:mat_rossyia_caucasian_war_deconfliction
					}
					c:TUR = {
						trigger_event = {
							id = mat_rossyia_caucasian_war.029 # Order Returns to Rumelia
						}
					}
					every_country = {
						limit = {
							is_involved_in_journal_entry = je_mat_rossyia_caucasian_war_situation
							c:TUR != this
						}
						post_notification = notification_mat_rossyia_caucasian_war_transition_deconfliction
					}
					custom_tooltip = mat_rossyia_caucasian_war_transition_deconfliction_tt
				}
				c:TUR ?= {
					mat_rossyia_caucasian_war_cleanup_riots_effect = yes
				}
				set_variable = {
					name = mat_rossyia_caucasian_war_escalation_var
					value = 0
				}
				set_variable = {
					name = mat_rossyia_caucasian_war_deescalation_var
					value = 0
				}
			}
			
			## Ignore this if we deescalated
			else_if = { # Ignore this if we deescalated
				limit = {
					mat_rossyia_caucasian_war_can_escalate_tension_trigger = yes
					var:mat_rossyia_caucasian_war_escalation_var >= 500
				}
				if = { # From Stable to Unrest
					limit = {
						var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_stable
					}
					set_variable = {
						name = mat_rossyia_caucasian_war_phase_var
						value = flag:mat_rossyia_caucasian_war_unrest
					}
					every_country = {
						limit = {
							is_involved_in_journal_entry = je_mat_rossyia_caucasian_war_situation
						}
						post_notification = notification_mat_rossyia_caucasian_war_transition_unrest
					}
					custom_tooltip = mat_rossyia_caucasian_war_transition_unrest_tt
				}
				else_if = { # From Unrest to Hostility
					limit = {
						var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_unrest
					}
					set_variable = {
						name = mat_rossyia_caucasian_war_phase_var
						value = flag:mat_rossyia_caucasian_war_hostility
					}
					every_country = {
						limit = {
							is_involved_in_journal_entry = je_mat_rossyia_caucasian_war_situation
						}
						post_notification = notification_mat_rossyia_caucasian_war_transition_hostility
					}
					custom_tooltip = mat_rossyia_caucasian_war_transition_hostility_tt
				}
				else_if = { # From Hostility to Crisis
					limit = {
						mat_rossyia_caucasian_war_crisis_possible_trigger = yes
						var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_hostility
					}
					set_variable = {
						name = mat_rossyia_caucasian_war_phase_var
						value = flag:mat_rossyia_caucasian_war_crisis
					}
					mat_rossyia_caucasian_war_initialize_crisis_effect = yes
					c:TUR ?= {
						trigger_event = {
							id = mat_rossyia_caucasian_war.020 # A Crisis in Rumelia
						}
					}
					every_country = {
						limit = {
							is_involved_in_journal_entry = je_mat_rossyia_caucasian_war_situation
							c:TUR != this
						}
						trigger_event = {
							id = mat_rossyia_caucasian_war.021 # A Crisis in Rumelia
						}
						post_notification = notification_mat_rossyia_caucasian_war_transition_crisis
					}
					custom_tooltip = mat_rossyia_caucasian_war_transition_crisis_tt
				}
				else_if = { # From Deconfliction to Stable
					limit = {
						var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_deconfliction
					}
					set_variable = {
						name = mat_rossyia_caucasian_war_phase_var
						value = flag:mat_rossyia_caucasian_war_stable
					}
					every_country = {
						limit = {
							is_involved_in_journal_entry = je_mat_rossyia_caucasian_war_situation
						}
						post_notification = notification_mat_rossyia_caucasian_war_transition_stable
					}
					custom_tooltip = mat_rossyia_caucasian_war_transition_stable_tt
				}
				set_variable = {
					name = mat_rossyia_caucasian_war_escalation_var
					value = 0
				}
				set_variable = {
					name = mat_rossyia_caucasian_war_deescalation_var
					value = 0
				}
			}
		}
		mat_rossyia_caucasian_war_check_modifiers_effect = yes
	}
}

mat_rossyia_caucasian_war_check_modifiers_effect = {
	c:TUR ?= {
		hidden_effect = {
			remove_modifier = modifier_mat_rossyia_caucasian_war_stable_phase
			remove_modifier = modifier_mat_rossyia_caucasian_war_unrest_phase
			remove_modifier = modifier_mat_rossyia_caucasian_war_hostility_phase
			remove_modifier = modifier_mat_rossyia_caucasian_war_deconfliction_phase
			remove_modifier = modifier_mat_rossyia_caucasian_war_crisis_phase
			every_political_movement = {
				remove_modifier = modifier_mat_rossyia_caucasian_war_stable_phase_movement
				remove_modifier = modifier_mat_rossyia_caucasian_war_unrest_phase_movement
				remove_modifier = modifier_mat_rossyia_caucasian_war_hostility_phase_movement
				remove_modifier = modifier_mat_rossyia_caucasian_war_deconfliction_phase_movement
				remove_modifier = modifier_mat_rossyia_caucasian_war_crisis_phase_movement
			}
		}
	}
	global_var:mat_rossyia_caucasian_war_situation = {
		if = {
			limit = {
				var:mat_rossyia_caucasian_war_phase_var = flag:mat_rossyia_caucasian_war_stable
			}
			c:TUR ?= {
				hidden_effect = {
					add_modifier = modifier_mat_rossyia_caucasian_war_stable_phase
					every_political_movement = {
						limit = {
							mat_rossyia_caucasian_war_eligible_minority_movement_trigger = yes
						}
						set_local_variable = {
							name = mat_rossyia_caucasian_war_current_adjustment_var
							value = mat_rossyia_caucasian_war_movement_activism_multiplier_value
						}
						add_modifier = {
							name = modifier_mat_rossyia_caucasian_war_stable_phase_movement
							multiplier = local_var:mat_rossyia_caucasian_war_current_adjustment_var
						}
						set_variable = {
							name = mat_rossyia_caucasian_war_previous_adjustment_var
							value = local_var:mat_rossyia_caucasian_war_current_adjustment_var
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				var:mat_rossyia_caucasian_war_phase_var = flag:mat_rossyia_caucasian_war_unrest
			}
			c:TUR ?= {
				add_modifier = modifier_mat_rossyia_caucasian_war_unrest_phase
				every_political_movement = {
					limit = {
						mat_rossyia_caucasian_war_eligible_minority_movement_trigger = yes
					}
					set_local_variable = {
						name = mat_rossyia_caucasian_war_current_adjustment_var
						value = mat_rossyia_caucasian_war_movement_activism_multiplier_value
					}
					add_modifier = {
						name = modifier_mat_rossyia_caucasian_war_unrest_phase_movement
						multiplier = local_var:mat_rossyia_caucasian_war_current_adjustment_var
					}
					set_variable = {
						name = mat_rossyia_caucasian_war_previous_adjustment_var
						value = local_var:mat_rossyia_caucasian_war_current_adjustment_var
					}
				}
			}
		}
		else_if = {
			limit = {
				var:mat_rossyia_caucasian_war_phase_var = flag:mat_rossyia_caucasian_war_hostility
			}
			c:TUR ?= {
				add_modifier = modifier_mat_rossyia_caucasian_war_hostility_phase
				every_political_movement = {
					limit = {
						mat_rossyia_caucasian_war_eligible_minority_movement_trigger = yes
					}
					set_local_variable = {
						name = mat_rossyia_caucasian_war_current_adjustment_var
						value = mat_rossyia_caucasian_war_movement_activism_multiplier_value
					}
					add_modifier = {
						name = modifier_mat_rossyia_caucasian_war_hostility_phase_movement
						multiplier = local_var:mat_rossyia_caucasian_war_current_adjustment_var
					}
					set_variable = {
						name = mat_rossyia_caucasian_war_previous_adjustment_var
						value = local_var:mat_rossyia_caucasian_war_current_adjustment_var
					}
				}
			}
		}
		else_if = {
			limit = {
				var:mat_rossyia_caucasian_war_phase_var = flag:mat_rossyia_caucasian_war_deconfliction
			}
			c:TUR ?= {
				add_modifier = modifier_mat_rossyia_caucasian_war_deconfliction_phase
				every_political_movement = {
					limit = {
						mat_rossyia_caucasian_war_eligible_minority_movement_trigger = yes
					}
					set_local_variable = {
						name = mat_rossyia_caucasian_war_current_adjustment_var
						value = mat_rossyia_caucasian_war_movement_activism_multiplier_value
					}
					add_modifier = {
						name = modifier_mat_rossyia_caucasian_war_deconfliction_phase_movement
						multiplier = local_var:mat_rossyia_caucasian_war_current_adjustment_var
					}
					set_variable = {
						name = mat_rossyia_caucasian_war_previous_adjustment_var
						value = local_var:mat_rossyia_caucasian_war_current_adjustment_var
					}
				}
			}
		}
		else_if = {
			limit = {
				var:mat_rossyia_caucasian_war_phase_var = flag:mat_rossyia_caucasian_war_crisis
			}
			c:TUR ?= {
				add_modifier = modifier_mat_rossyia_caucasian_war_crisis_phase
				every_political_movement = {
					limit = {
						mat_rossyia_caucasian_war_eligible_minority_movement_trigger = yes
					}
					set_local_variable = {
						name = mat_rossyia_caucasian_war_current_adjustment_var
						value = mat_rossyia_caucasian_war_movement_activism_multiplier_value
					}
					add_modifier = {
						name = modifier_mat_rossyia_caucasian_war_crisis_phase_movement
						multiplier = local_var:mat_rossyia_caucasian_war_current_adjustment_var
					}
					set_variable = {
						name = mat_rossyia_caucasian_war_previous_adjustment_var
						value = local_var:mat_rossyia_caucasian_war_current_adjustment_var
					}
				}
			}
		}
	}
}

mat_rossyia_caucasian_war_update_riot_variables = {
	global_var:mat_rossyia_caucasian_war_situation = {
		remove_variable = mat_rossyia_caucasian_war_riot_state_1_var
		remove_variable = mat_rossyia_caucasian_war_riot_state_2_var
		remove_variable = mat_rossyia_caucasian_war_riot_state_3_var
		# Try to find state 1 and set variable
		c:TUR ?= {
			random_scope_state = {
				limit = {
					has_modifier = modifier_mat_rossyia_caucasian_war_race_riots
				}
				save_scope_as = mat_rossyia_caucasian_war_riot_state_1_scope
			}
		}
		if = {
			limit = {
				exists = scope:mat_rossyia_caucasian_war_riot_state_1_scope
			}
			set_variable = {
				name = mat_rossyia_caucasian_war_riot_state_1_var
				value = scope:mat_rossyia_caucasian_war_riot_state_1_scope
			}
			# Try to find state 2 and set variable
			c:TUR ?= {
				random_scope_state = {
					limit = {
						NOT = {
							scope:mat_rossyia_caucasian_war_riot_state_1_scope ?= this
						}
						has_modifier = modifier_mat_rossyia_caucasian_war_race_riots
					}
					save_scope_as = mat_rossyia_caucasian_war_riot_state_2_scope
				}
			}
			if = {
				limit = {
					exists = scope:mat_rossyia_caucasian_war_riot_state_2_scope
				}
				set_variable = {
					name = mat_rossyia_caucasian_war_riot_state_2_var
					value = scope:mat_rossyia_caucasian_war_riot_state_2_scope
				}
				# Try to find state 3 and set variable
				c:TUR ?= {
					random_scope_state = {
						limit = {
							NOR = {
								scope:mat_rossyia_caucasian_war_riot_state_1_scope ?= this
								scope:mat_rossyia_caucasian_war_riot_state_2_scope ?= this
							}
							has_modifier = modifier_mat_rossyia_caucasian_war_race_riots
						}
						save_scope_as = mat_rossyia_caucasian_war_riot_state_3_scope
					}
				}
				if = {
					limit = {
						exists = scope:mat_rossyia_caucasian_war_riot_state_3_scope
					}
					set_variable = {
						name = mat_rossyia_caucasian_war_riot_state_3_var
						value = scope:mat_rossyia_caucasian_war_riot_state_3_scope
					}
				}
			}
		}
	}
}

mat_rossyia_caucasian_war_force_stable_effect = {
	global_var:mat_rossyia_caucasian_war_situation = {
		set_variable = {
			name = mat_rossyia_caucasian_war_phase_var
			value = flag:mat_rossyia_caucasian_war_stable
		}
		every_country = {
			limit = {
				mat_rossyia_caucasian_war_party_trigger = yes
			}
			post_notification = notification_mat_rossyia_caucasian_war_transition_stable
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_escalation_var
			value = 0
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_deescalation_var
			value = 0
		}
		mat_rossyia_caucasian_war_check_modifiers_effect = yes
	}

}

mat_rossyia_caucasian_war_force_unrest_effect = {
	global_var:mat_rossyia_caucasian_war_situation = {
		set_variable = {
			name = mat_rossyia_caucasian_war_phase_var
			value = flag:mat_rossyia_caucasian_war_unrest
		}
		every_country = {
			limit = {
				mat_rossyia_caucasian_war_party_trigger = yes
			}
			post_notification = notification_mat_rossyia_caucasian_war_transition_unrest
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_escalation_var
			value = 0
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_deescalation_var
			value = 0
		}
		mat_rossyia_caucasian_war_check_modifiers_effect = yes
	}
}

mat_rossyia_caucasian_war_force_hostility_effect = {
	global_var:mat_rossyia_caucasian_war_situation = {
		set_variable = {
			name = mat_rossyia_caucasian_war_phase_var
			value = flag:mat_rossyia_caucasian_war_hostility
		}
		every_country = {
			limit = {
				mat_rossyia_caucasian_war_party_trigger = yes
			}
			post_notification = notification_mat_rossyia_caucasian_war_transition_hostility
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_escalation_var
			value = 0
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_deescalation_var
			value = 0
		}
		mat_rossyia_caucasian_war_check_modifiers_effect = yes
	}
}

mat_rossyia_caucasian_war_force_deconfliction_effect = {
	global_var:mat_rossyia_caucasian_war_situation = {
		set_variable = {
			name = mat_rossyia_caucasian_war_phase_var
			value = flag:mat_rossyia_caucasian_war_deconfliction
		}
		every_country = {
			limit = {
				mat_rossyia_caucasian_war_party_trigger = yes
			}
			post_notification = notification_mat_rossyia_caucasian_war_transition_deconfliction
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_escalation_var
			value = 0
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_deescalation_var
			value = 0
		}
		mat_rossyia_caucasian_war_check_modifiers_effect = yes
	}
}

mat_rossyia_caucasian_war_force_crisis_effect = {
	global_var:mat_rossyia_caucasian_war_situation = {
		set_variable = {
			name = mat_rossyia_caucasian_war_phase_var
			value = flag:mat_rossyia_caucasian_war_crisis
		}
		every_country = {
			limit = {
				mat_rossyia_caucasian_war_party_trigger = yes
			}
			post_notification = notification_mat_rossyia_caucasian_war_transition_crisis
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_escalation_var
			value = 0
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_deescalation_var
			value = 0
		}
		mat_rossyia_caucasian_war_check_modifiers_effect = yes
	}
}

mat_rossyia_caucasian_war_tension_cooldown_effect = {
	if = {
		limit = {
			global_var:mat_rossyia_caucasian_war_situation = {
				OR = {
					var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_stable
					var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_unrest
					var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_deconfliction
				}
			}
		}
		set_global_variable = {
			name = mat_rossyia_caucasian_war_cooldown_var
			years = 2
		}
	}
	if = {
		limit = {
			global_var:mat_rossyia_caucasian_war_situation = {
				OR = {
					var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_stable
					var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_unrest
					var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_deconfliction
				}
			}
			
		}
		set_global_variable = {
			name = mat_rossyia_caucasian_war_cooldown_var
			years = 1
		}
	}
	else_if = {
		limit = {
			global_var:mat_rossyia_caucasian_war_situation = {
				OR = {
					var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_hostility
					var:mat_rossyia_caucasian_war_phase_var ?= flag:mat_rossyia_caucasian_war_crisis
				}
			}
		}
		set_global_variable = {
			name = mat_rossyia_caucasian_war_cooldown_var
			months = 3
		}
	}
}

## Situation Escalation Effects
mat_rossyia_caucasian_war_add_escalation_effect = {
	if = {
		limit = {
			mat_rossyia_caucasian_war_can_escalate_tension_trigger = yes
		}
		custom_tooltip = {
			text = mat_rossyia_caucasian_war_add_escalation
			set_local_variable = {
				name = mat_rossyia_caucasian_war_escalation_loc_var
				value = $escalation_value$
			}
			global_var:mat_rossyia_caucasian_war_situation = {
				change_variable = {
					name = mat_rossyia_caucasian_war_escalation_var
					add = $escalation_value$
				}
			}
		}
		mat_rossyia_caucasian_war_check_situation_phase_effect = yes
	}
}

mat_rossyia_caucasian_war_add_small_escalation_effect = {
	mat_rossyia_caucasian_war_add_escalation_effect = {
		escalation_value = 10
	}
}

mat_rossyia_caucasian_war_add_medium_escalation_effect = {
	mat_rossyia_caucasian_war_add_escalation_effect = {
		escalation_value = 25
	}
}

mat_rossyia_caucasian_war_add_large_escalation_effect = {
	mat_rossyia_caucasian_war_add_escalation_effect = {
		escalation_value = 50
	}
}

mat_rossyia_caucasian_war_add_very_large_escalation_effect = {
	mat_rossyia_caucasian_war_add_escalation_effect = {
		escalation_value = 100
	}
}

## Situation Deescalation Effects
mat_rossyia_caucasian_war_add_deescalation_effect = {
	if = {
		limit = {
			mat_rossyia_caucasian_war_can_deescalate_tension_trigger = yes
		}
		custom_tooltip = {
			text = mat_rossyia_caucasian_war_add_deescalation
			set_local_variable = {
				name = mat_rossyia_caucasian_war_deescalation_loc_var
				value = $deescalation_value$
			}
			global_var:mat_rossyia_caucasian_war_situation = {
				change_variable = {
					name = mat_rossyia_caucasian_war_deescalation_var
					add = $deescalation_value$
				}
			}
		}
		mat_rossyia_caucasian_war_check_situation_phase_effect = yes
	}
}

mat_rossyia_caucasian_war_add_small_deescalation_effect = {
	mat_rossyia_caucasian_war_add_deescalation_effect = {
		deescalation_value = 10
	}
}

mat_rossyia_caucasian_war_add_medium_deescalation_effect = {
	mat_rossyia_caucasian_war_add_deescalation_effect = {
		deescalation_value = 25
	}
}

mat_rossyia_caucasian_war_add_large_deescalation_effect = {
	mat_rossyia_caucasian_war_add_deescalation_effect = {
		deescalation_value = 50
	}
}

mat_rossyia_caucasian_war_add_very_large_deescalation_effect = {
	mat_rossyia_caucasian_war_add_deescalation_effect = {
		deescalation_value = 100
	}
}

mat_rossyia_caucasian_war_add_extremely_large_deescalation_effect = {
	mat_rossyia_caucasian_war_add_deescalation_effect = {
		deescalation_value = 250
	}
}

## Situation Movement Effects
mat_rossyia_caucasian_war_add_medium_movement_radicalism_effect = {
	every_political_movement = {
		limit = {
			OR = {
				is_political_movement_type = movement_cultural_minority
				is_political_movement_type = movement_religious_minority
			}
			gbbf_culture_trigger = yes
		}
		add_modifier = {
			name = modifier_mat_rossyia_caucasian_war_increased_radicalism
			months = gbbf_duration_5_years
			is_decaying = yes
		}
	}
}

mat_rossyia_caucasian_war_add_large_movement_radicalism_effect = {
	every_political_movement = {
		limit = {
			OR = {
				is_political_movement_type = movement_cultural_minority
				is_political_movement_type = movement_religious_minority
			}
			gbbf_culture_trigger = yes
		}
		add_modifier = {
			name = modifier_mat_rossyia_caucasian_war_greatly_increased_radicalism
			months = gbbf_duration_5_years
			is_decaying = yes
		}
	}
}

mat_rossyia_caucasian_war_add_very_large_movement_radicalism_effect = {
	every_political_movement = {
		limit = {
			OR = {
				is_political_movement_type = movement_cultural_minority
				is_political_movement_type = movement_religious_minority
			}
			gbbf_culture_trigger = yes
		}
		add_modifier = {
			name = modifier_mat_rossyia_caucasian_war_critically_increased_radicalism
			months = gbbf_duration_5_years
			is_decaying = yes
		}
	}
}

## Situation Loyalist/Radicals Effects
turkfm_add_medium_loyalists_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		add_loyalists_in_state = {
			culture = cu:greek
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		add_loyalists_in_state = {
			culture = cu:rhomaios
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_loyalists_in_state = {
			culture = cu:serb
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_loyalists_in_state = {
			culture = cu:bulgarian
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_loyalists_in_state = {
			culture = cu:bosniak
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		add_loyalists_in_state = {
			culture = cu:albanian
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_loyalists_in_state = {
			culture = cu:croat
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_loyalists_in_state = {
			culture = cu:slovene
			value = medium_radicals
		}
	}
}

turkfm_add_large_loyalists_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		add_loyalists_in_state = {
			culture = cu:greek
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		add_loyalists_in_state = {
			culture = cu:rhomaios
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_loyalists_in_state = {
			culture = cu:serb
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_loyalists_in_state = {
			culture = cu:bulgarian
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_loyalists_in_state = {
			culture = cu:bosniak
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		add_loyalists_in_state = {
			culture = cu:albanian
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_loyalists_in_state = {
			culture = cu:croat
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_loyalists_in_state = {
			culture = cu:slovene
			value = large_radicals
		}
	}
}

turkfm_add_very_large_loyalists_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		add_loyalists_in_state = {
			culture = cu:greek
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		add_loyalists_in_state = {
			culture = cu:rhomaios
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_loyalists_in_state = {
			culture = cu:serb
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_loyalists_in_state = {
			culture = cu:bulgarian
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_loyalists_in_state = {
			culture = cu:bosniak
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		add_loyalists_in_state = {
			culture = cu:albanian
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_loyalists_in_state = {
			culture = cu:croat
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_loyalists_in_state = {
			culture = cu:slovene
			value = very_large_radicals
		}
	}
}

turkfm_add_medium_radicals_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		add_radicals_in_state = {
			culture = cu:greek
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		add_radicals_in_state = {
			culture = cu:rhomaios
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_radicals_in_state = {
			culture = cu:serb
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_radicals_in_state = {
			culture = cu:bulgarian
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_radicals_in_state = {
			culture = cu:bosniak
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		add_radicals_in_state = {
			culture = cu:albanian
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_radicals_in_state = {
			culture = cu:croat
			value = medium_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_radicals_in_state = {
			culture = cu:slovene
			value = medium_radicals
		}
	}
}

turkfm_add_large_radicals_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		add_radicals_in_state = {
			culture = cu:greek
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		add_radicals_in_state = {
			culture = cu:rhomaios
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_radicals_in_state = {
			culture = cu:serb
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_radicals_in_state = {
			culture = cu:bulgarian
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_radicals_in_state = {
			culture = cu:bosniak
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		add_radicals_in_state = {
			culture = cu:albanian
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_radicals_in_state = {
			culture = cu:croat
			value = large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_radicals_in_state = {
			culture = cu:slovene
			value = large_radicals
		}
	}
}

turkfm_add_very_large_radicals_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		add_radicals_in_state = {
			culture = cu:greek
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		add_radicals_in_state = {
			culture = cu:rhomaios
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_radicals_in_state = {
			culture = cu:serb
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_radicals_in_state = {
			culture = cu:bulgarian
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_radicals_in_state = {
			culture = cu:bosniak
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		add_radicals_in_state = {
			culture = cu:albanian
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_radicals_in_state = {
			culture = cu:croat
			value = very_large_radicals
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_radicals_in_state = {
			culture = cu:slovene
			value = very_large_radicals
		}
	}
}

## Situation Riot Effects
turkfm_reduce_state_sol_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:greek
			months = gbbf_duration_5_years
			multiplier = -1
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:rhomaios
			months = gbbf_duration_5_years
			multiplier = -1
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:serb
			months = gbbf_duration_5_years
			multiplier = -1
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:bulgarian
			months = gbbf_duration_5_years
			multiplier = -1
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:bosniak
			months = gbbf_duration_5_years
			multiplier = -1
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:albanian
			months = gbbf_duration_5_years
			multiplier = -1
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:croat
			months = gbbf_duration_5_years
			multiplier = -1
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		add_culture_standard_of_living_modifier = {
			culture = cu:croat
			months = gbbf_duration_5_years
			multiplier = -1
		}
	}
}

turkfm_select_pop_effect = { # execute this from the state scope
	random_list = {
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = greek
				}
			}
			cu:greek = {
				save_scope_as = mat_rossyia_caucasian_war_tension_culture_scope
			}
		}
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = rhomaios
				}
			}
			cu:rhomaios = {
				save_scope_as = mat_rossyia_caucasian_war_tension_culture_scope
			}
		}
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = serb
				}
			}
			cu:serb = {
				save_scope_as = mat_rossyia_caucasian_war_tension_culture_scope
			}
		}
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = bulgarian
				}
			}
			cu:bulgarian = {
				save_scope_as = mat_rossyia_caucasian_war_tension_culture_scope
			}
		}
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = bosniak
				}
			}
			cu:bosniak = {
				save_scope_as = mat_rossyia_caucasian_war_tension_culture_scope
			}
		}
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = albanian
				}
			}
			cu:albanian = {
				save_scope_as = mat_rossyia_caucasian_war_tension_culture_scope
			}
		}
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = croat
				}
			}
			cu:croat = {
				save_scope_as = mat_rossyia_caucasian_war_tension_culture_scope
			}
		}
		1 = {
			trigger = {
				any_scope_pop = {
					has_pop_culture = slovene
				}
			}
			cu:slovene = {
				save_scope_as = mat_rossyia_caucasian_war_tension_culture_scope
			}
		}
	}
}

turkfm_massacre_effect = {
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = greek
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:greek
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = rhomaios
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:rhomaios
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = serb
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:serb
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bulgarian
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:bulgarian
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = bosniak
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:bosniak
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = albanian
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:albanian
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = croat
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:croat
		}
	}
	if = {
		limit = {
			any_scope_pop = {
				has_pop_culture = slovene
			}
		}
		kill_population_percent_in_state = {
			percent = 0.05
			culture = cu:slovene
		}
	}
}

mat_rossyia_caucasian_war_cleanup_riots_effect = {
	hidden_effect = {
		remove_modifier = modifier_mat_rossyia_caucasian_war_nationalist_insurrection
		every_scope_state = {
			limit = {
				has_modifier = modifier_mat_rossyia_caucasian_war_race_riots
			}
			remove_modifier = modifier_mat_rossyia_caucasian_war_race_riots
		}
		every_political_movement = {
			remove_modifier = modifier_mat_rossyia_caucasian_war_nationalist_insurrection_movement
		}
	}
}

mat_rossyia_caucasian_war_cleanup_situation_effect = {
	remove_variable = mat_rossyia_caucasian_war_cooldown_var
	hidden_effect = {
		remove_modifier = modifier_mat_rossyia_caucasian_war_stable_phase
		remove_modifier = modifier_mat_rossyia_caucasian_war_unrest_phase
		remove_modifier = modifier_mat_rossyia_caucasian_war_hostility_phase
		remove_modifier = modifier_mat_rossyia_caucasian_war_deconfliction_phase
		remove_modifier = modifier_mat_rossyia_caucasian_war_crisis_phase
	}
}

## Situation Crisis Effects
mat_rossyia_caucasian_war_initialize_crisis_effect = {
	global_var:mat_rossyia_caucasian_war_situation = {
		set_variable = {
			name = mat_rossyia_caucasian_war_crisis_var
			value = 125
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_crisis_progress_var
			value = mat_rossyia_caucasian_war_crisis_progress_value
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_crisis_duration_var
			value = 0
		}
		change_variable = {
			name = mat_rossyia_caucasian_war_crisis_counter_var
			add = 1
		}
	}
	c:TUR ?= {
		add_journal_entry = {
			type = je_great_eastern_crisis
		}
	}
}

mat_rossyia_caucasian_war_crisis_success_effect = {
	# Stolen from chris_scripted_effects
	# TODO replace with GotB-specific scripting once ready
	c:TUR ?= {
		add_modifier = {
			name = eastern_crisis_controlled
			months = gbbf_duration_5_years
		}
		every_country = {
			limit = {
				is_subject_of = root
				OR = {
					capital.region = sr:region
					has_interest_marker_in_region = region
				}
			}
			c:TUR.power_bloc ?= {
				add_leverage = { target = PREV value = 250 }
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:albanian
				}
			}
			add_fervor_target_modifier = {
				#changes target
				culture = cu:albanian
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_loss
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:bosniak
				}
			}
			add_fervor_target_modifier = {
				#changes target
				culture = cu:bosniak
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_loss
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:bulgarian
				}
			}
			add_fervor_target_modifier = {
				#changes target
				culture = cu:bulgarian
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_loss
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:croat
				}
			}
			add_fervor_target_modifier = {
				#changes target
				culture = cu:croat
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_loss
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:greek
				}
			}
			add_fervor_target_modifier = {
				#changes target
				culture = cu:greek
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_loss
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:rhomaios
				}
			}
			add_fervor_target_modifier = {
				#changes target
				culture = cu:rhomaios
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_loss
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:romanian
				}
			}
			add_fervor_target_modifier = {
				#changes target
				culture = cu:romanian
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_loss
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:serb
				}
			}
			add_fervor_target_modifier = {
				#changes target
				culture = cu:serb
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_loss
			}
		}
	}
}

mat_rossyia_caucasian_war_crisis_fail_effect = {
	c:TUR ?= {
		add_modifier = {
			name = eastern_crisis_not_controlled
			months = gbbf_duration_5_years
		}
		if = {
			limit = {
				any_country = {
					OR = {
						is_subject_of = root
						capital.region = sr:region
					}
				}
			}
			custom_tooltip = {
				text = eastern_crisis_subjects_modifier__ten_years_tt
			}
			every_country = {
				limit = {
					OR = {
						is_subject_of = root
						capital.region = sr:region
					}
				}
				hidden_effect = { #covered by custom tooltip above
					add_modifier = {
						name = eastern_crisis_liberty_desire_increase
						months = gbbf_duration_10_years
						is_decaying = yes
					}
				}
			}
		}

		if = { #lose leverage
			limit = {
				exists = c:TUR.power_bloc
			}
			every_country = {
				limit = {
					capital.region = sr:region
				}
				c:TUR.power_bloc ?= {
					add_leverage = { target = PREV value = -500 }
				}
			}
		}

		if = {
			limit = {
				any_political_movement = {
					OR = {
						is_political_movement_type = movement_religious_majority
						is_political_movement_type = movement_religious_minority
						is_political_movement_type = movement_cultural_majority
						is_political_movement_type = movement_cultural_minority
					}
				}
			}
			every_political_movement = {
				limit = {
					OR = {
						is_political_movement_type = movement_religious_majority
						is_political_movement_type = movement_religious_minority
						is_political_movement_type = movement_cultural_majority
						is_political_movement_type = movement_cultural_minority
					}
				}
				add_modifier = {
					name = eastern_crisis_movement_attraction
					months = gbbf_duration_5_years
					is_decaying = yes
				}
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:albanian
				}
			}
			add_fervor_target_modifier = { #changes target
				culture = cu:albanian
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_gain
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:bosniak
				}
			}
			add_fervor_target_modifier = { #changes target
				culture = cu:bosniak
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_gain
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:bulgarian
				}
			}
			add_fervor_target_modifier = { #changes target
				culture = cu:bulgarian
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_gain
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:croat
				}
			}
			add_fervor_target_modifier = { #changes target
				culture = cu:croat
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_gain
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:greek
				}
			}
			add_fervor_target_modifier = { #changes target
				culture = cu:greek
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_gain
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:rhomaios
				}
			}
			add_fervor_target_modifier = { #changes target
				culture = cu:rhomaios
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_gain
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:romanian
				}
			}
			add_fervor_target_modifier = { #changes target
				culture = cu:romanian
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_gain
			}
		}
		if = {
			limit = {
				any_scope_pop = {
					culture = cu:serb
				}
			}
			add_fervor_target_modifier = { #changes target
				culture = cu:serb
				months = gbbf_duration_5_years
				multiplier = eastern_crisis_fervor_gain
			}
		}
	}
}

mat_rossyia_caucasian_war_cleanup_crisis_effect = {
	global_var:mat_rossyia_caucasian_war_situation = {
		set_variable = {
			name = mat_rossyia_caucasian_war_crisis_var
			value = 250
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_crisis_progress_var
			value = 0
		}
		set_variable = {
			name = mat_rossyia_caucasian_war_crisis_duration_var
			value = 0
		}
		set_bar_progress = {
			name = mat_rossyia_caucasian_war_crisis_progress_bar
			value = 250
		}
	}
}

## Separatism Effects ##
turkfm_hellenic_separatism_effect = {
	if = {
		limit = {
			has_modifier = modifier_mat_rossyia_caucasian_war_supporting_gunrunners
		}
		remove_modifier = modifier_mat_rossyia_caucasian_war_supporting_gunrunners
		add_modifier = {
			name = modifier_mat_rossyia_caucasian_war_supporting_gunrunners
			multiplier = money_amount_multiplier_medium
		}
		if = {
			limit = {
				c:TUR ?= {
					OR = {
						owns_entire_state_region = STATE_THESSALIA
						owns_entire_state_region = STATE_MACEDONIA
						owns_entire_state_region = STATE_SKOPIA
						owns_entire_state_region = STATE_CRETE
						owns_entire_state_region = STATE_AYDIN
						owns_entire_state_region = STATE_CYPRUS
					}
				}
			}
			random_list = {
				1 = {
					trigger = {
						c:TUR = {
							owns_entire_state_region = STATE_THESSALIA
						}
					}
					s:STATE_THESSALIA = {
						random_scope_state = {
							add_radicals_in_state = {
								culture = cu:greek
								value = 0.05
							}
						}
					}
				}
				1 = {
					trigger = {
						c:TUR = {
							owns_entire_state_region = STATE_MACEDONIA
						}
					}
					s:STATE_MACEDONIA = {
						random_scope_state = {
							add_radicals_in_state = {
								culture = cu:greek
								value = 0.05
							}
						}
					}
				}
				1 = {
					trigger = {
						c:TUR = {
							owns_entire_state_region = STATE_SKOPIA
						}
					}
					s:STATE_SKOPIA = {
						random_scope_state = {
							add_radicals_in_state = {
								culture = cu:greek
								value = 0.05
							}
						}
					}
				}
				1 = {
					trigger = {
						c:TUR = {
							owns_entire_state_region = STATE_CRETE
						}
					}
					s:STATE_CRETE = {
						random_scope_state = {
							add_radicals_in_state = {
								culture = cu:greek
								value = 0.05
							}
						}
					}
				}
				1 = {
					trigger = {
						c:TUR = {
							owns_entire_state_region = STATE_AYDIN
						}
					}
					s:STATE_AYDIN = {
						random_scope_state = {
							add_radicals_in_state = {
								culture = cu:greek
								value = 0.05
							}
						}
					}
				}
				1 = {
					trigger = {
						c:TUR = {
							owns_entire_state_region = STATE_CYPRUS
						}
					}
					s:STATE_CYPRUS = {
						random_scope_state = {
							add_radicals_in_state = {
								culture = cu:greek
								value = 0.05
							}
						}
					}
				}
			}
		}
		else = {
			remove_modifier = modifier_mat_rossyia_caucasian_war_supporting_gunrunners
		}
	}
}

## Technical Effects ##
mat_rossyia_caucasian_war_cleanup_mat_rossyia_caucasian_war_effect = {
	hidden_effect = {
		remove_modifier = modifier_mat_rossyia_caucasian_war_supporting_gunrunners
	}
}

turkfm_split_bulgaria_effect = {
	create_country = {
		tag = BUL_RUM
		origin = c:TUR
		state = s:STATE_NORTHERN_THRACE.region_state:BUL
	}
	c:TUR ?= {
		create_diplomatic_pact = {
			country = c:BUL_RUM
			type = protectorate
		}
	}
}